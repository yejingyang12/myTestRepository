<!--自查-->
<div>
<!--弹出框-->
    <div id="dialog" class="evaluationAlert hDiaSelfCheck" style=" display: none;position: fixed;top:0;left: 0;background: rgba(0,0,0,0.5);z-index: 2">
        <div class="evaluation" style="height: 560px;margin-top:-245px;">
            <span class="closes" @click="closes()"></span>
            <p class="clearfix cut">
                <span class="fl revokeTitle" v-if="!editParam.selfexaminationId">添加系统自查信息</span>
                <span class="fl revokeTitle" v-else>修改系统自查信息</span>
                <span class="fr tianMsg">带“ <span class="xing">*</span>”为必填项</span>
            </p>

            <form action="">
                <ul class="clearfix">
                    <li class="self"> 自查</li>
                    <li class="row">
                        <div class="col-md-6">
                            <label for="" class="col-md-3" style="width: 120px;text-align:right;">
                                <span class="xing">*</span>
                                自查时间：
                            </label>
							<el-date-picker class="col-md-6 col-sm-3 useData" v-model="editParam.inspectionDate" type="date" placeholder="选择日期" style="width: 66.66666667%;padding:0;"></el-date-picker>

                        </div>
                        <div class="col-md-6">
                            <label for="" class="col-md-3" style="width: 120px;text-align:right;">
                                <span class="xing">*</span>
                                自查状态：
                            </label>
                            <div class="col-md-8 col-sm-3 evalName revData pos-relative">
                                <span style="z-index:1;position: absolute;right:8.7%;top: 1%;color: #cecece">|</span>
                                <select class="form-control pos-relative" v-model="editParam.fkInspectionStatus">
                                    <option value=0>请选择</option>
                                    <option value=1>未自查</option>
                                    <option value=2>已自查</option>
                                </select>
                            </div>
                        </div>
                    </li>
                    <li class="row">
                        <div class="col-md-6">
                            <label for="" class="col-md-3" style="width: 120px;text-align:right;">
                                <span class="xing">*</span>
                                自查结果：
                            </label>
                            <div class="col-md-8 col-sm-3 evalName revData pos-relative">
                                <span style="z-index:1;position: absolute;right:8.7%;top: 1%;color: #cecece">|</span>
                                <select class="form-control pos-relative" v-model="editParam.fkInspectionReu">
                                    <option value=0>请选择</option>
                                    <option value=1>符合</option>
                                    <option value=2>基本符合</option>
                                    <option value=3>不符合</option>
                                </select>
                            </div>
                        </div>
                    </li>
                    <li class="row">
                        <div class="col-md-12 report" style="padding-left: 15px;">
                            <label for="" class="col-md-2" style="width: 120px;text-align:right;padding:0;">
                                <span class="xing">*</span>
                                自查报告：
                            </label>
                            <div class="clearfix sysText col-md-9 uploadBox">
							                <div class="uploadSty">
							                  <ul class="fileList" id="fileList">
							                  	<li v-if="!(editParam.examinationReportName == null || editParam.examinationReportName =='')">
								                  	<div class="fl"  @click="fileDownload(editParam.examinationReportPath,editParam.examinationReportName,editParam.examinationReportId)" >{{editParam.examinationReportName}}</div>
								                  	<i @click="fileDel(editParam.examinationReportPath,1)" class="el-icon-close fl"></i>
							                  	</li>
							                  </ul>
							                  <el-button type="primary" size="small">上传</el-button>
							                </div>
							                <input type="file" value="" id="file" @change='onUpload'>
							                <p>
							                                                附件总量最大 <span class="xing">30M</span>，上传格式为：word、pdf、exl、zip、rar、sep
							                </p>
							              </div>
                        </div>
                    </li>
                </ul>
                <ul class="clearfix">
                    <li>整改</li>
                    <li class="row">
                        <div class="col-md-6">
                            <label for="" class="col-md-3" style="width: 120px;text-align:right;">
                                <span class="xing">*</span>
                                整改结果：
                            </label>
                            <div class="col-md-8 col-sm-3 evalName revData pos-relative">
                                <span style="z-index:1;position: absolute;right:8.7%;top: 1%;color: #cecece">|</span>
                                <select class="form-control pos-relative"  v-model="editParam.fkRectificationReu">
                                    <option value=0>请选择</option>
                                    <option value=1>已整改</option>
                                    <option value=2>未整改</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="" class="col-md-3" style="width: 120px;text-align:right;">
                                <span class="xing" v-show="editParam.fkRectificationReu==1">*</span>
                                整改时间：
                            </label>
							<el-date-picker class="col-md-6 col-sm-3 useData" v-model="editParam.rectificationDate" type="date" placeholder="选择日期" style="width: 66.66666667%;padding:0;"></el-date-picker>
                        </div>
                    </li>
                    <li class="row">
                        <div class="col-md-12 report" style="padding-left: 15px;">
                            <label for="" class="col-md-2" style="width: 120px;text-align:right;padding:0">
                                <span class="xing" v-show="editParam.fkRectificationReu==1">*</span>
                                整改报告：
                            </label>
                            <div class="clearfix sysText col-md-9 uploadBox">
							                <div class="uploadSty">
							                  <ul class="fileList" id="fileList2">
							                  	<li v-if="!(editParam.examinationRectificationReportName == null || editParam.examinationRectificationReportName =='')">
								                  	<div class="fl"  @click="fileDownload(editParam.examinationRectificationReportPath,editParam.examinationRectificationReportName,editParam.examinationRectificationReportId)" >{{editParam.examinationRectificationReportName}}</div>
								                  	<i @click="fileDel(editParam.examinationRectificationReportPath,2)" class="el-icon-close fl"></i>
							                  	</li>
							                  </ul>
							                  <el-button type="primary" size="small">上传</el-button>
							                </div>
							                <input type="file" value="" id="file" @change='onUpload2'>
							                <p>
							                                                附件总量最大 <span class="xing">30M</span>，上传格式为：word、pdf、exl、zip、rar、sep
							                </p>
							              </div>
                        </div>
                    </li>
                </ul>
            </form>
            <p class="h-p" style="width:100%;margin:-15px 15px;">

                <button type="button"

                        class="btn btn-default" style="padding: 2px 20px;float:right;margin-right: 35px;padding: 6px 10px; margin-bottom: 15px" @click="closes">
                    取消</button>
                <button type="button" class="btn"
                        @click="saveSelfexamination"
                        style="padding: 2px 20px;float:right;margin-right:10px;margin-bottom:15px;background-color: #1e91e2;color:#fff;">确认
                </button>

            </p>
        </div>
    </div>


		<div class="container h-padding">
		    <!--系统定级备案自查列表-->
		    <div class="container h-table-border" style="background:#fff;padding: 15px;padding-top: 0">
		        <div style="height: 50px;line-height: 50px">
		            <i class="h-list-line" style="vertical-align:middle;"></i>
		            系统自查信息列表
		        </div>
		        <div class="h-bottom-line  h-bottom-position" style="margin: 0 -15px"></div>
		        <p class="h-p" style="margin: 15px 0;text-align: center">
		        		<button type="button"  class="h-btn btn h-btn-add float-le" id="h-btn-add" @click="showDialog('')" style="border: none;"> </button>
  {{systemName}}		        </p>
		        <div class="row" style="margin:0">
		            <div class="col-md-12">
		                <div class="row table-responsive">
		                    <table id="h-list-show" class="table table-bordered table-striped">
		                        <tr class="tr-row rowOne">
		                            <th style="min-width:47px">序号</th>
		                            <th>系统名称
		                                <slot name="paixujiantou"></slot>
		                            </th>
		                            <th>自查时间
		                                <slot name="paixujiantou2"></slot>
		                            </th>
		                            <th>自查状态
		                                <slot name="paixujiantou3"></slot>
		                            </th>
		                            <th>自查结果
		                            		<slot name="paixujiantou4"></slot>
		                            </th>
		                            <th style="max-width:75px">自查报告
		                            </th>
		                            <th>整改结果
		                                <slot name="paixujiantou5"></slot>
		                            </th>
		                            <th>整改时间
		                                <slot name="paixujiantou6"></slot>
		                            </th>
		                            <th>整改报告</th>
		                            <th>操作</th>
		                        </tr>
		                        <tr class="tr-row" v-for="(pro,index) in result.data">
		                            <td>{{index+1}}</td>
		                            <!--系统名称-->
		                            <td>{{pro.systemName}}</td>
		                            <!--自查时间-->
		                            <td>{{pro.inspectionDate == '1970-01-01'?'':pro.inspectionDate}}</td>
		                            <!--自查状态-->
		                            <td>{{pro.fkInspectionStatus == 1 ? '未自查':(pro.fkInspectionStatus == 2 ? '已自查':'')}}</td>
		                            <!--自查结果-->
		                            <td>{{pro.fkInspectionReu == 1 ? '符合':(pro.fkInspectionReu == 2 ? '基本符合':(pro.fkInspectionReu==3 ? '不符合':''))}}</td>
		                            <!--自查报告-->
		                            <td>
		                                <a href="javascript:;" @click="downloadReport(pro.examinationReportId)">{{pro.examinationReportName}}</a>
		                            </td>
		                            <!--整改结果-->
		                            <td style=" vertical-align: middle;">{{pro.fkRectificationReu == 1 ? '已整改':(pro.fkRectificationReu == 2 ? '未整改':'')}}</td>
		                            <!--整改时间-->
		                            <td>{{pro.rectificationDate == '1970-01-01'?'':pro.rectificationDate}}</td>
		                            <!--整改报告-->
		                            <td>
		                                <a href="javascript:;" @click="downloadReport(pro.examinationRectificationReportId)">{{pro.examinationRectificationReportName}}</a>
		                            </td>
		                            <!--操作-->
		                            <td style="color:#1e91e2;">
		                                <!--class="hide3"-->
		                                <a class="hide3">
		                                    <i id="h-dingji" @click="showDialog(pro.selfexaminationId)">编辑</i> <i style="color:#1e91e2 ">|</i>
		                                 
		                                    
		                                    	<i @click="deleteClick" type="text" size="small">删除</i>
                                           <!--  测评表格的删除弹窗 -->
                                            <div class="dialogShaw">
	                                               
												   <div class="inquiry">
												        <p>是否删除</p>
												        <div class="inquiryBtn">
												            <button type="button" class="btn btn-success fl" @click="deleteSelfexamination(pro.selfexaminationId)">确定</button>
												            <button type="button" class="btn btn-default fr" @click="closes">取消</button>
												        </div>
												    </div>
											 </div> 
		                                </a>
		                            </td>
		                        </tr>
		                    </table>
		                </div>
		            </div>
		        </div>
		        <!--分页-->
		        <div class="h-page-box1" style="position:relative;width:100%;height:64px;margin-right: 0;">
				      <span style="float: left;padding-top: 18px">
				        <div v-if="result.currentPage==0">
				                        显示0到0行，共0行记录
				        </div>
				        <div v-else>
				                        显示{{((result.currentPage-1)*result.pagesize)+1}}到{{(result.currentPage)*(result.pagesize)}}行，共{{result.total}}行记录
				        </div>
				      </span>
				      <div class="h-page">
				        <nav aria-label="Page navigation">
				          <ul class="pagination">
				            <li @click="clickPage(result.currentPage-1)">
				              <a href="javascript:;" aria-label="Previous">
				                <span aria-hidden="true">上一页</span>
				              </a>
				            </li>
				            <li v-for="n in result.totalPages==0?1:result.totalPages" :class="[n==result.currentPage ? 'current' : '' ]">
				              <a href="javascript:;" @click="clickPage(n)">{{n}}</a>
				            </li>
				            <li @click="clickPage(result.currentPage+1)">
				              <a href="javascript:;" aria-label="Next">
				                <span aria-hidden="true">下一页</span>
				              </a>
				            </li> 共{{result.totalPages}}页，跳到
				            <li>
				            <input type="text" id="txt" @keydown.enter="hpageNum(this)" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')" style="overflow: visible;">
				              <div class="box" id="box"></div></li> 页
				          </ul>
				        </nav>
	            </div>
		        </div>
		    </div>
		</div>
</div>
