<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sinopec.smcc.cpro.grading.mapper.AttachMaterialsMapper">
  <resultMap id="BaseResultMap" type="com.sinopec.smcc.cpro.grading.entity.AttachMaterialsListResult">
    <id column="pkId" property="attachId" jdbcType="VARCHAR" />
    <result column="fkSystemId" property="fkSystemId" jdbcType="VARCHAR" />
    <result column="fkSyssonId" property="fkSyssonId" jdbcType="VARCHAR" />
    <result column="fkAttachType" property="fkAttachType" jdbcType="VARCHAR" />
    <result column="attachName" property="attachName" jdbcType="VARCHAR" />
    <result column="attachPath" property="attachPath" jdbcType="VARCHAR" />
    <result column="deleteStatus" property="deleteStatus" jdbcType="TINYINT" />
    <result column="createUserName" property="createUserName" jdbcType="VARCHAR" />
    <result column="createTime" property="createTime" jdbcType="DATE" />
    <result column="updateTime" property="updateTime" jdbcType="DATE" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
  </resultMap>
  
  <select id="selectDetailsAttach" parameterType="com.sinopec.smcc.cpro.grading.entity.AttachMaterialsParam" resultMap="BaseResultMap">
    SELECT 
      attach.fkSystemId,
      attach.fkSyssonId,
      attach.fkAttachType,
      attach.attachName
    FROM t_cpro_attach AS attach
    WHERE
      (fkAttachType = 'gradingReport' OR  fkAttachType = 'expertReview' OR fkAttachType = 'evaluationPresentation') 
      AND fkSystemId = #{fkSystemId} AND deleteStatus = 1
  </select>
  
  <select id="selectEditAttach" parameterType="com.sinopec.smcc.cpro.grading.entity.AttachMaterialsParam" resultMap="BaseResultMap">
    SELECT 
      attach.fkSystemId,
      attach.fkSyssonId,
      attach.fkAttachType,
      attach.attachName
    FROM t_cpro_attach AS attach
    WHERE
      (fkAttachType = 'topologyDescription' OR fkAttachType = 'organizationManagement' 
        OR fkAttachType = 'implementationPlan' OR fkAttachType = 'licenseCertificate'
        OR fkAttachType = 'gradingReport' OR  fkAttachType = 'expertReview' 
        OR fkAttachType = 'evaluationPresentation') 
      AND fkSystemId = #{fkSystemId}
  </select>
</mapper>